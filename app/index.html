<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta property="og:title" content="Venn 7: Symmetric 7-Venn Diagrams as a Musical Interface">
        <meta property="og:description" content="Play chords with interactive 7-fold Venn diagrams.">
        <meta property="og:image" content="https://nathan.ho.name/venn7/images/screenshot.png">
        <meta property="og:url" content="http://nathan.ho.name/venn7/">
        <meta name="twitter:card" content="summary_large_image">
        <title>Venn 7: Symmetric 7-Venn Diagrams as a Musical Interface</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div id="container">
            <nav id="header">
                <button></button>
                <nav id="diagram-and-arrows">
                    <button id="previous-diagram">◀</button>
                    <h1 id="diagram-name"></h1>
                    <button id="next-diagram">▶</button>
                </nav>
                <button id="help">?</button>
            </nav>
            <div id="canvas-container"></div>
        </div>
        <article id="explanation" class="hidden">
            <div id="explanation-background"></div>
            <div id="explanation-inner">
                <h1>Venn 7: Exploring Symmetric 7-Venn Diagrams with a Musical Interface</h1>

                <p><em>Venn 7</em> is a Web app exhibiting interactive versions of symmetric 7-Venn diagrams by mapping them to musical chords.</p>

                <p>Click on regions in the diagrams to play chords, and use the arrows to navigate between the six 7-Venn diagram and one 5-Venn diagram. Read on for an explanation of what's going on here.</p>

                <h2>Venn diagrams</h2>

                <p>You may be familiar with the following Venn diagrams, which visualize all possible Boolean operations of two and three sets:</p>

                <div class="image-container two-images">
                    <img src="images/venn_2.png">
                    <img src="images/venn_3.png">
                </div>

                <p>To introduce some clear terminology, the boundary of each set is referred to as a "curve," and the shapes formed by intersections and differences of curves are the "regions." The 2-Venn diagram has three regions and the 3-Venn diagram seven regions. In general, an <em>n</em>-Venn diagram has exactly 2<sup><em>n</em></sup> - 1 regions. Finally, we'll define the "order" of a region as the number of curves it is contained in.</p>

                <p>What about a 4-Venn diagram? Our first attempt might look like this:</p>

                <div class="image-container">
                    <img src="images/venn_4_naive.png">
                </div>

                <p>On closer inspection, this diagram is incorrect. There are only 13 regions compared to an expected 15. The two missing regions are of order 2, those that would be formed by the intersection of the two diagonally opposite curves. In this case, there is no region contained by x and w but not y and z, and no region contained by y and z but not x and w.</p>

                <p>A correct Venn diagram with all 15 regions looks like this (<a href="https://keeptalkinggame.com/"><em>Keep Talking</em></a> players may recognize this one):</p>

                <div class="image-container medium">
                    <img src="images/venn_4.png">
                </div>

                <p>But unlike the 2-Venn and 3-Venn diagrams, it requires ellipses rather than circles, and doesn't have fourfold rotational symmetry like we would expect. In fact, no 4-Venn diagram exists using only circles, and no 4-Venn diagram can be fourfold rotational symmetric.</p>

                <p>As we can gather, Venn diagrams of order 4 or more don't generalize easily from the 2-Venn and 3-Venn diagrams. In fact, it isn't obvious whether Venn diagrams even exist at all for <em>n</em> &gt; 4. The answer to this question was positively resolved by Venn himself, who described an inductive construction involving drawing curves around the borders of other curves:</p>

                <div class="image-container two-images">
                    <img src="images/venn_4_alt.png">
                    <img src="images/venn_5.png">
                </div>

                <p>By continually adding these folded curves, we can show that there are valid Venn diagrams for all <em>n</em> &gt; 4. This settles the existence question, but these diagrams sure look messy. Moving the goalposts, how can we find a sufficiently "nice-looking" Venn diagram of high order?</p>

                <p>A good place to look is symmetric Venn diagrams &mdash; <em>n</em>-Venn diagrams with <em>n</em>-fold rotational symmetry. We've mentioned that no 4-Venn diagram can be symmetric, which follows from Henderson's theorem:</p>

                <blockquote>
                    <strong>Henderson's theorem:</strong> if a symmetric <em>n</em>-Venn diagram exists, then <em>n</em> must be prime.
                </blockquote>

                <p>That brings us to <em>n</em> = 5, which is prime. There are a handful of 5-Venn diagrams, but there is only one that is <em>simple</em> &mdash; that is, no three curves intersect at one point. Grünbaum found the only simple symmetric 5-Venn diagram in 1975, a pretty figure that can be rendered using five congruent ellipses:</p>

                <div class="image-container medium">
                    <img src="images/grunbaum_5.png">
                </div>

                <p>(This figure is included in the web app, but we use peanut-shaped regions for visual evenness.)</p>

                <p>Fast-forward to 1992, and Grünbaum publishes a paper containing this stunning figure &mdash; the first simple symmetric 7-Venn diagram:</p>

                <div class="image-container big">
                    <img src="images/grunbaum_7.png">
                </div>

                <p>As more simple symmetric 7-Venn diagrams were found, two additional special constraints were established to narrow the search:</p>

                <ol>
                    <li><strong>Monotone:</strong> The regions sort themselves into concentric layers by order. Formally, each region of order 1 &lt; <em>k</em> &lt; <em>n</em> is bordered by regions of order <em>k</em> + 1 and <em>k</em> - 1. (The above diagram is not monotone. The reason is left as a reader exercise.)</li>
                    <li><strong>Polar symmetric:</strong> The Venn diagram is topologically identical if turned inside out.</li>
                </ol>

                <p>It was shown that there are exactly six "golden 7-Venn diagrams" that satisfy all three of these properties, named Adelaide, Victoria, Massey, Manawatu, Palmerston North, and Hamilton. If the polar symmetric condition is relaxed, there are an additional 16 "silver 7-Venn diagrams."</p>

                <p>The <em>n</em> = 11 case was mysterious for a long time &mdash; some symmetric diagrams were found but none were simple. In 2012, Mamakani and Ruskey made a breakthrough discovery christened "Newroz," along with over 200,000 more. Unfortunately, these diagrams are less tenable as interactive Web apps, since most of the 2,047 regions are very small.</p>

                <h2>About the app</h2>

                <p><a href="https://en.wikipedia.org/wiki/Pandiatonicism">Pandiatonicism</a> is a broad variety of musical practices that use the diatonic scale in ways "beyond" tonal harmony. A common pandiatonic technique is to treat the seven tones as roughly uniform, just as dodecaphony views the 12-tone chromatic scale. This idea is realized in pitch class set theory mod 7 (Santa, 2000), which adapts classical 12-tone set theory to pandiatonic music by thinking of diatonic chords as subsets of the scale.</p>

                <p>My friend Nathan Turczan originally inspired this project by pointing out that the curves of a 7-fold Venn diagram can be mapped to a diatonic scale, making the Venn diagram into a playable visualization of set theory mod 7. I loved the idea, and it stuck with me for a good two years until I finally caved and built it. Just as we anticipated, the resulting interface is as awkward and strange as it is fascinating. It is definitely not meant to be a serious contender for a viable musical interface, but more of a net art project on its own.</p>

                <p>I noticed early on that standard synthesizer tones on the diagram produced a discontinuity as the scale wraps back to the octave. For example, there are seven regions on a diagram representing diatonic seconds, but one of those has to be a seventh, breaking the symmetry. To address this, I decided to use <a href="https://en.wikipedia.org/wiki/Shepard_tone">Shepard tones</a>, an auditory illusion where a note has ambiguous octavation. This closes the seam formed by the octave and makes the tones reflect the symmetry of the diagram.</p>

                <h2>Conclusions</h2>

                <p>For source code, see the <a href="https://github.com/nhthn/venn7">Git repo</a>.</p>

                <p>Since the data generation is decoupled from the app, I would love to see what other things you can do with it. Some fun ideas:</p>

                <ul>
                    <li>virtual MIDI keyboard as a VST plugin</li>
                    <li>posters</li>
                    <li>string or wire art (all Venn diagrams are representable as woven strings)</li>
                    <li>physical instrument with buttons</li>
                    <li>tattoo</li>
                    <li>dartboard</li>
                    <li>Twister mat</li>
                    <li>7-day weekly planner</li>
                    <li>eccentric billionaire mansion floor plan</li>
                </ul>

                <h2>Acknowledgements</h2>

                <p>Thanks to Nathan Turczan for the inspiration, and Luke Nihlen for early feedback. Dedicated in memory of Eddie Gale.</p>

                <h2>References</h2>

                <ul>
                    <li>Venn, John. 1881. <a href="https://archive.org/details/symboliclogic00venngoog"><em>Symbolic Logic</em></a>.</li>
                    <li>Venn, John. 1880. "On the diagrammatic and mechanical representation of propositions and reasonings." <em>Philosophical Magazine.</em></li>
                    <li>Cao, Tao et al. 2010. "Symmetric Monotone Venn Diagrams with Seven Curves."</li>
                    <li>Grünbaum, Branko. 1975. "<a href="https://www.jstor.org/stable/2689288">Venn Diagrams and Independent Families of Sets</a>."</li>
                    <li>Grünbaum, Branko. 1992. "Venn Diagrams II." <em>Geombinatorics.</em> Issue II, Vol. 2. (The PDF is hard to find, but it's out there &mdash; let me know if you want a copy.)</li>
                    <li>Grünbaum, Branko. 1999. "The search for symmetric Venn diagrams."</li>
                    <li>Ruskey, Frank and Weston, Mark. 1997. "<a href="https://www.combinatorics.org/files/Surveys/ds5/VennSymmExamples.html">A Survey of Venn Diagrams</a>."</li>
                    <li>Santa, Matthew. 2000. "<a href="https://www.jstor.org/stable/854427?seq=1">Analysing Post-Tonal Diatonic Music: A Modulo 7 Perspective</a>."</li>
                    <li>Mamakani, Khalegh and Ruskey, Frank. 2012. "<a href="https://arxiv.org/pdf/1207.6452v1.pdf">A New Rose: The First Simple Symmetric 11-Venn Diagram</a>."</li>
            </div>
        </article>
        <div id="loading-text"></div>
        <script src="hsluv-0.1.0.min.js"></script>
        <script src="svg.min.js"></script>
        <script src="Tone.js"></script>
        <script src="webmidi.min.js"></script>
        <script src="midi.js"></script>
        <script src="venn_diagrams.js"></script>
        <script src="app.js"></script>
    </body>
</html>
